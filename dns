sudo log stream --info --predicate 'process == "mDNSResponder"'

log show --predicate 'process == "mDNSResponder"' --info --last 1m



sudo killall -HUP mDNSResponder


sudo killall -INFO mDNSResponder






sudo dns-sd -O








nslookup -query=ns com. 198.41.0.4


nslookup -query=ns youtube.com. 192.41.162.30


nslookup -query=a youtube.com. ns1.google.com


Root server (.)  â†’  TLD server (.com)  â†’  Authoritative server (google.com)  â†’  Final IP





nslookup -query=ns com. 198.41.0.4



You are asking the root server (198.41.0.4 = a.root-servers.net) for the nameservers of the .com TLD.
Root replies with the list of .com TLD servers (a.gtld-servers.net through m.gtld-servers.net) plus their IPs (glue records).

You asked a root server (198.41.0.4 = a.root-servers.net) for the NS records of .com.
ğŸ“œ What the output means
Can't find com.: No answer
This just means the root server doesnâ€™t have an A record for .com itself (which makes sense â€” TLDs arenâ€™t real hosts).
Authoritative answers can be found from:
This is the delegation step.
The root server is telling you: â€œI donâ€™t know the IP for .com, but here are the servers that are authoritative for .com.â€



nslookup -query=a l.gtld-servers.net 198.41.0.4



Youâ€™re asking the root server (198.41.0.4) for the A record of l.gtld-servers.net.
Root servers donâ€™t normally store A records for TLD servers like l.gtld-servers.net.
Thatâ€™s why you see:
*** Can't find l.gtld-servers.net: No answer

When you asked for NS com., the root server did include glue records:
l.gtld-servers.net   internet address = 192.41.162.30
Thatâ€™s how recursive resolvers learn the IP of l.gtld-servers.net without having to do another lookup.
So the glue record is the actual answer you need â€” you donâ€™t need to query the root server for the A record of l.gtld-servers.net.


nslookup -query=ns youtube.com 192.41.162.30

You asked the .com TLD server (l.gtld-servers.net, IP 192.41.162.30) for the NS records of youtube.com.


nslookup -type=a youtube.com ns2.google.com. 

nslookup -query=a youtube.com 216.239.32.10


That will return the actual IPv4 addresses for youtube.com


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


Step-by-step (like how recursive resolvers do):
Query root server for .com NS
nslookup -type=ns com. 198.41.0.4
â†’ returns list of .com TLD servers (l.gtld-servers.net etc.)
Query .com TLD server for NS of youtube.com
nslookup -type=ns youtube.com l.gtld-servers.net
â†’ returns authoritative servers for youtube.com (usually Googleâ€™s name servers).
Query one of those authoritative servers for the A record
nslookup -type=a youtube.com ns1.google.com
â†’ finally gives you the IP address.

nslookup -query=any www.youtube.com ns2.google.com.

You asked Googleâ€™s authoritative server (ns2.google.com) to return all record types it is willing to provide for www.youtube.com.





https://www.youtube.com/watch?v=Ah7fYex6Ups&list=LL&index=35
https://www.iana.org/domains/root/servers
